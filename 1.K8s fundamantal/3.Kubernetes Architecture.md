
# # Kubernetes Components

![[Pasted image 20250906191436.png]]


- **API Server:** Serves as the front end for Kubernetes, mediating communication between users, the command line interface, and the cluster.
- **etcd:** A distributed key-value store that holds all the crucial data for managing the cluster. In multi-master environments, etcd ensures data consistency by replicating information and implementing lock mechanisms.
- **Scheduler:** Allocates newly created container tasks to suitable worker nodes based on resource availability.
	- **Scheduler (kube-scheduler):** เมื่อมีการสร้าง Pod ใหม่ Scheduler จะทำหน้าที่**ตัดสินใจ**ว่าจะนำ Pod นั้นไปรันที่ Worker Node ไหนดี โดยพิจารณาจากทรัพยากรที่ว่างอยู่ของแต่ละ Node และเงื่อนไขอื่นๆ ที่เรากำหนดไว้
- **Controllers:** Act as the orchestration brain by monitoring cluster events and replacing failed containers or nodes.
	- **Controller Manager (kube-controller-manager):** คอยตรวจสอบสถานะของ Cluster อยู่ตลอดเวลา และพยายามปรับปรุงให้สถานะปัจจุบัน (current state) ตรงกับสถานะที่เราต้องการ (desired state) เช่น ถ้าเราสั่งให้มี Pod ทำงาน 3 ตัว แต่มีตัวหนึ่งล่มไป Controller Manager ก็จะสั่งให้สร้างตัวใหม่ขึ้นมาทดแทน
- **Container Runtime:** The underlying software responsible for running containers on a node. While Docker is popular, alternatives like containerd or CRI-O are available.
- **kubelet:** An agent on each worker node that communicates with the master node to ensure that containers are operational and healthy.
- **kube-proxy**: 
	- maintains network rules on nodes. These network rules allow network communication to your Pods from network sessions inside or outside of your cluster.
	- handle Service 
# Master vs Worker Nodes
![[Pasted image 20250906192227.png]]
![[Pasted image 20250906192527.png]]


- **Master Node** - มีหน้าที่หลักในการ**บริหารจัดการและควบคุม**สถานะของ Cluster ให้เป็นไปตามที่เราต้องการ Master Node จะคอยตัดสินใจเรื่องต่างๆ ทั้งหมด เช่น การสั่งให้สร้างหรือลบแอปพลิเคชัน (Pod), การจัดสรรทรัพยากร, และการดูแลให้ระบบโดยรวมยังคงทำงานอยู่ได้
- **Worker Node** - เครื่อง Server (ไม่ว่าจะเป็นเครื่องจริงหรือ Virtual Machine) ที่ทำหน้าที่**รันแอปพลิเคชัน**ของเราจริงๆ ตามคำสั่งที่ได้รับมาจาก Master Node


# Kubectl

command-line utility for interacting with your Kubernetes cluster
![[Pasted image 20250906193001.png]]

command: https://kubernetes.io/docs/reference/kubectl/quick-reference/

UI: https://k8slens.dev/

